  <!DOCTYPE html>
  <html lang="en">
  
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="icon" href="favicon.ico" type="image/x-icon">
      <title>AI Face Insta Persona | Your Face, Your Story</title>
      <meta name="description" content="Use our AI-powered Face Score Analyzer to get an objective evaluation of your attractiveness. Upload your photo and receive a detailed analysis in seconds.">
      <meta name="keywords" content="AI, face score, attractiveness, image analysis, beauty score">
      <meta name="author" content="gpt2hub">
      <meta name="robots" content="index, follow">
      <link rel="canonical" href="https://snapself-3c339.web.app/">
  
      <!-- Open Graph / Facebook -->
      <meta property="og:type" content="website">
      <meta property="og:url" content="https://snapself-3c339.web.app/">
      <meta property="og:title" content="AI Insta Persona | Your Face, Your Story">
      <meta property="og:description" content="Get an objective evaluation of your attractiveness using our AI-powered Face Score Analyzer. Upload your photo now!">
      <meta property="og:image" content="https://snapself-3c339.web.app/og.webp">
  
      <!-- Twitter -->
      <meta property="twitter:card" content="https://snapself-3c339.web.app/og.webp">
      <meta property="twitter:url" content="https://snapself-3c339.web.app/">
      <meta property="twitter:title" content="AI Insta Persona | Your Face, Your Story">
      <meta property="twitter:description" content="Get an objective evaluation of your attractiveness using our AI-powered Face Score Analyzer. Upload your photo now!">
      <meta property="twitter:image" content="https://snapself-3c339.web.app/og.webp">
  
      <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
      <style>
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #eef2f7;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        h2 {
            text-align: center;
            color: #34495e;
            font-size: 1.5em;
            margin-bottom: 30px;
        }

        .live-stream-link {
            text-align: center;
            margin-bottom: 20px;
        }

        .live-stream-link a {
            color: #e74c3c;
            text-decoration: none;
            font-weight: bold;
        }

        .live-stream-link a:hover {
            text-decoration: underline;
        }

        .upload-container {
            background-color: #fff;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
        }

        #dragDropArea {
            border: 2px dashed #3498db;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-bottom: 30px;
            background-color: #f8f9fa;
        }

        #dragDropArea.dragover {
            background-color: #e0f7fa;
        }

        #imagePreviewContainer {
            position: relative;
            max-width: 100%;
            max-height: 300px;
            margin: 20px auto;
            display: none;
            border-radius: 12px;
            border: 5px solid #3498db;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        #imagePreview {
            width: 100%;
            height: auto;
            border-radius: 12px;
        }

        #scanningBar {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: rgba(255, 255, 255, 0.6);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
            animation: scanning 3s linear infinite;
            display: none;
        }

        @keyframes scanning {
            0% {
                top: 0;
            }
            50% {
                top: calc(100% - 5px);
            }
            100% {
                top: 0;
            }
        }

        #imageInput {
            display: none;
        }

        .btn {
            display: inline-block;
            padding: 12px 25px;
            background-color: #3498db;
            color: white;
            border-radius: 25px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            border: none;
            font-size: 16px;
        }

        .btn:hover {
            background-color: #2980b9;
            transform: scale(1.05);
        }

        #uploadNewButton {
            display: none;
            margin: 20px auto;
        }

        #loading {
            text-align: center;
            display: none;
            color: #3498db;
            font-weight: bold;
            margin-top: 20px;
        }

        #result {
            background-color: #fff;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            display: none;
        }

        #translate {
            display: flex;
            justify-content: center;
        }

        #share {
            margin-top: 30px;
            display: flex;
            justify-content: center;
        }

        footer {
            display: flex;
            justify-content: center;
            margin-top: 40px;
        }

        body > .skiptranslate {
            display: none !important;
        }

        body {
            top: 0 !important;
        }

        .spinner-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .result-item {
            margin-bottom: 10px;
        }

        .result-item strong {
            display: block;
            margin-bottom: 5px;
            color: #2c3e50;
        }

      </style>
  </head>
  
  <body>
    <header>
        <h1>AI Insta Persona</h1>
        <h2>Your Face, Your Story</h2>
        <div class="live-stream-link">
            <a href="https://gpt2hub.com/" target="_blank" rel="noopener noreferrer">
                AI SW Engineer Gpt2Hub made this.
            </a>
        </div>
    </header>
    <main>
        <div id="translate"></div>
        <div class="upload-container">
            <div id="dragDropArea">
                <p>Drag and drop an image here, or click to select a file</p>
                <button class="btn" id="selectImageButton">Choose an Image</button>
            </div>
            <input type="file" id="imageInput" accept="image/jpeg,image/png,image/heic" required>
            <div id="imagePreviewContainer">
                <img id="imagePreview" alt="Image Preview" src="">
                <div id="scanningBar"></div>
            </div>
            <button id="uploadNewButton" class="btn" type="button">Reset</button>
        </div>
        <div id="loading">
            <div class="spinner-container">
                <div class="spinner"></div>
                <div>Analyzing...</div>
            </div>
        </div>
        <div id="result"></div>
        <div id="share">
            <!-- AddToAny BEGIN -->
            <div class="a2a_kit a2a_kit_size_32 a2a_default_style">
                <a class="a2a_dd" href="https://www.addtoany.com/share"></a>
                <a class="a2a_button_facebook"></a>
                <a class="a2a_button_linkedin"></a>
                <a class="a2a_button_whatsapp"></a>
                <a class="a2a_button_sms"></a>
                <a class="a2a_button_pinterest"></a>
                <a class="a2a_button_reddit"></a>
                <a class="a2a_button_copy_link"></a>
                <a class="a2a_button_facebook_messenger"></a>
                <a class="a2a_button_threads"></a>
            </div>
            <script async src="https://static.addtoany.com/menu/page.js"></script>
            <!-- AddToAny END -->
        </div>
    </main>
    <footer>
        <p>&copy; 2024 Gpt2Hub. All rights reserved.</p>
    </footer>
      <script>
          function onLoadTranslate() {
              new google.translate.TranslateElement(
                  { pageLanguage: 'en' },
                  'translate'
              );
          }
      </script>
      <script src="https://translate.google.com/translate_a/element.js?cb=onLoadTranslate"></script>
      <script src="https://cdn.jsdelivr.net/npm/heic2any/dist/heic2any.min.js"></script>
  
      <script type="module">
          import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
          import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-analytics.js";
          import { initializeAppCheck, ReCaptchaV3Provider, getToken } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app-check.js";
  
          const firebaseConfig = {
            apiKey: CONFIG_API_KEY,
            authDomain: "snapself-3c339.firebaseapp.com",
            projectId: "snapself-3c339",
            storageBucket: "snapself-3c339.appspot.com",
            messagingSenderId: "323320068200",
            appId: "1:323320068200:web:cc3d8394704f13c482a3dd",
            measurementId: "G-TZEMC6NH8H"
          };

          const app = initializeApp(firebaseConfig);
          const analytics = getAnalytics(app);
  
          const appCheck = initializeAppCheck(app, {
              provider: new ReCaptchaV3Provider('6LdNJCUqAAAAANEg94hSlpuk0mxJaXpp-dPcK2Le'),
              isTokenAutoRefreshEnabled: true
          });
  
          const imagePreview = document.getElementById('imagePreview');
          const imagePreviewContainer = document.getElementById('imagePreviewContainer');
          const scanningBar = document.getElementById('scanningBar');
          const uploadNewButton = document.getElementById('uploadNewButton');
          const resultDiv = document.getElementById('result');
          const loadingDiv = document.getElementById('loading');
          const dragDropArea = document.getElementById('dragDropArea');
          const selectImageButton = document.getElementById('selectImageButton');
          async function convertHeicToJpeg(file) {
              try {
                  const convertedBlob = await heic2any({
                      blob: file,
                      toType: "image/jpeg",
                  });
                  const jpegFile = new File([convertedBlob], file.name.replace(/\.[^/.]+$/, ".jpeg"), { type: 'image/jpeg' });
                  return jpegFile;
              } catch (error) {
                  console.error('HEIC conversion error:', error);
                  alert('Failed to convert HEIC image. Please try a different file.');
                  throw error;
              }
          }
          async function analyzeImage(file) {
              let imageFile = file;
              if (file.type === 'image/heic') {
                  try {
                      imageFile = await convertHeicToJpeg(file);
                  } catch (error) {
                      return;
                  }
              }

              if (!imageFile || !(imageFile.type === 'image/jpeg' || imageFile.type === 'image/png')) {
                  alert('Please select a valid image file.');
                  return;
              }

              resultDiv.style.display = 'none';
              loadingDiv.style.display = 'block';
              scanningBar.style.display = 'block'; // Show scanning bar
              uploadNewButton.style.display = 'none';

              const formData = new FormData();
              formData.append('image', imageFile);

              try {
                  const appCheckToken = await getToken(appCheck, false);
                  const response = await fetch('https://analyzeimage-nirlz2hexq-uc.a.run.app', {
                      method: 'POST',
                      body: formData,
                      headers: {
                          'X-Firebase-AppCheck': appCheckToken.token
                      },
                      mode: 'cors'
                  });

                  if (!response.ok) {
                      throw new Error('Network response was not ok: ' + response.statusText);
                  }
                  const data = await response.json();

                  resultDiv.innerHTML = `
                      <h3>Analysis Result:</h3>
                      <p><strong>Score:</strong> ${data.score}</p>
                      <div class="result-item"><strong>Facial Characteristics:</strong> ${data.reason.facial_characteristics || 'N/A'}</div>
                      <div class="result-item"><strong>Physiognomy:</strong> ${data.reason.physiognomy || 'N/A'}</div>
                      <div class="result-item"><strong>First Impression:</strong> ${data.reason.first_impression || 'N/A'}</div>
                      <div class="result-item"><strong>Suitable Partner:</strong> ${data.reason.suitable_partner || 'N/A'}</div>
                      <div class="result-item"><strong>MBTI:</strong> ${data.reason.MBTI || 'N/A'}</div>
                  `;

              } catch (error) {
                  console.error('Error:', error);
                  resultDiv.innerHTML = 'An error occurred while analyzing the image: ' + error.message;
              } finally {
                  loadingDiv.style.display = 'none';
                  scanningBar.style.display = 'none'; // Hide scanning bar
                  resultDiv.style.display = 'block';
                  uploadNewButton.style.display = 'block';
              }
          }

          function handleFiles(files) {
              if (files.length > 0) {
                  let file = files[0];
                  if (file.type === 'image/heic') {
                      try {
                          convertHeicToJpeg(file).then((jpegFile) => {
                              file = jpegFile;
                              processImage(file);
                          });
                      } catch (error) {
                          return;
                      }
                  } else {
                      processImage(file);
                  }
              }
          }

          function processImage(file) {
              if (file.type === 'image/jpeg' || file.type === 'image/png') {
                  const reader = new FileReader();
                  reader.onload = function (e) {
                      imagePreview.src = e.target.result;
                      imagePreviewContainer.style.display = 'block';
                      analyzeImage(file);
                  }
                  reader.readAsDataURL(file);
              } else {
                  alert('Please select an image file');
              }
          }

          imageInput.addEventListener('change', function (event) {
              handleFiles(this.files);
          });

          dragDropArea.addEventListener('dragover', function (e) {
              e.preventDefault();
              e.stopPropagation();
              this.classList.add('dragover');
          });

          dragDropArea.addEventListener('dragleave', function (e) {
              e.preventDefault();
              e.stopPropagation();
              this.classList.remove('dragover');
          });

          dragDropArea.addEventListener('drop', function (e) {
              handleFiles(e.dataTransfer.files);
          });

          selectImageButton.addEventListener('click', function () {
              imageInput.click();
          });

          imageInput.addEventListener('click', function (e) {
              e.stopPropagation();
          });

          uploadNewButton.addEventListener('click', function () {
              imagePreviewContainer.style.display = 'none';
              dragDropArea.style.display = 'block';
              uploadNewButton.style.display = 'none';
              imageInput.value = '';
              resultDiv.style.display = 'none';
          });

          document.addEventListener('submit', function (event) {
              event.preventDefault();
          });

          window.addEventListener('beforeunload', function (e) {
              e.preventDefault();
              e.returnValue = '';
          });e.preventDefault();
              e.stopPropagation();
              this.classList.remove('dragover');

      </script>
  </body>
  
  </html>
  
  